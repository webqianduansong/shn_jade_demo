# 用户个人中心功能实现文档

## 📋 功能概述

为玉石网站添加了完整的用户个人中心功能，用户登录后可以查看个人信息和订单历史。

## ✨ 功能特性

### 1. Header 导航栏增强
- ✅ 登录后在头部显示个人中心图标（UserAddOutlined）
- ✅ 支持响应式设计，移动端只显示图标，PC端显示图标+文字
- ✅ 使用 Tooltip 提供友好的交互提示
- ✅ 保持与网站整体风格一致的玉石绿色主题

### 2. 个人中心页面
- ✅ 现代化的标签页布局（个人信息 + 我的订单）
- ✅ 美观的用户信息展示卡片
- ✅ 完整的订单列表表格
- ✅ 订单状态标签（待支付、已支付、已发货、已送达、已取消）
- ✅ 空状态处理（无订单时显示引导）
- ✅ 加载状态处理

### 3. API 接口
- ✅ `/api/orders` - 查询当前用户的订单列表
- ✅ 包含订单详情、商品信息、地址信息
- ✅ 身份验证保护

### 4. 国际化支持
- ✅ 中文（zh）完整翻译
- ✅ 英文（en）完整翻译
- ✅ 所有文本支持多语言切换

### 5. 样式设计
- ✅ 玉石绿色渐变主题（#2d5a3d 到 #4a8c5f）
- ✅ 卡片圆角和阴影效果
- ✅ 响应式布局（PC/平板/手机）
- ✅ 平滑过渡动画
- ✅ 悬停效果增强用户体验

## 📁 新增文件

### 1. 页面组件
```
src/app/[locale]/profile/
  ├── page.tsx              # 服务端页面组件（处理身份验证和重定向）
  ├── ProfileClient.tsx     # 客户端组件（个人中心主界面）
  └── profile.css          # 个人中心专属样式
```

### 2. API 路由
```
src/app/api/orders/
  └── route.ts             # 订单查询接口
```

### 3. 文档
```
USER_PROFILE_FEATURE.md    # 本文档
```

## 🔧 修改文件

### 1. Header 组件
**文件**: `src/components/Header.tsx`
- 添加个人中心图标入口
- 导入 `UserAddOutlined` 图标
- 添加 Tooltip 提示
- 支持响应式文字显示/隐藏

### 2. 国际化文件
**文件**: `src/locales/zh.json` 和 `src/locales/en.json`
- 添加 `nav.profile` 翻译
- 添加完整的 `profile` 命名空间：
  - 页面标题和副标题
  - 用户信息字段
  - 订单列表字段
  - 订单状态翻译

## 🎨 样式亮点

### 1. 配色方案
- **主题色**: 玉石绿 #2d5a3d
- **渐变色**: linear-gradient(135deg, #2d5a3d 0%, #4a8c5f 100%)
- **背景渐变**: linear-gradient(135deg, #f5f7fa 0%, #e8f0f3 100%)

### 2. 响应式断点
- **移动端**: max-width: 480px
  - 头像缩小为 60px
  - 标题字体 1.1rem
  - 表格横向滚动
  
- **平板端**: max-width: 768px
  - 头像默认 80px
  - 标题字体 1.25rem
  - 卡片居中对齐

- **PC端**: min-width: 769px
  - 完整布局
  - 显示所有文字标签
  - 表格自适应宽度

### 3. 交互效果
- 悬停时按钮上移 1px
- 添加阴影增强层次感
- 颜色渐变过渡
- 表格行悬停高亮

## 🔐 权限控制

### 1. 页面级保护
- 未登录用户访问 `/profile` 会自动重定向到登录页
- 登录成功后自动返回个人中心

### 2. API 级保护
- 所有订单查询需要身份验证
- 只能查询当前登录用户的订单
- 返回 401 错误给未授权请求

## 📊 数据模型

### 用户信息 (User)
```typescript
{
  id: string
  email: string
  name?: string
}
```

### 订单信息 (Order)
```typescript
{
  id: string
  totalAmount: number      // 金额（分）
  status: string          // 订单状态
  createdAt: string       // 创建时间
  items: OrderItem[]      // 订单商品
  address?: Address       // 收货地址
}
```

### 订单商品 (OrderItem)
```typescript
{
  productId: string
  productName: string
  quantity: number
  price: number          // 单价（分）
}
```

## 🚀 使用指南

### 1. 访问个人中心
- 用户登录后，点击头部的个人中心图标
- 或直接访问 `/{locale}/profile`

### 2. 查看个人信息
- 默认显示"个人信息"标签页
- 展示用户ID、邮箱、会员等级、账户状态

### 3. 查看订单历史
- 切换到"我的订单"标签页
- 表格展示所有历史订单
- 支持分页浏览（每页10条）
- 显示订单号、商品信息、金额、状态、日期

### 4. 订单状态说明
- 🟠 **待支付**: 订单已创建，等待支付
- 🟢 **已支付**: 支付成功，等待发货
- 🔵 **已发货**: 商品已发出，运输中
- ✅ **已送达**: 订单已完成
- 🔴 **已取消**: 订单已取消

## 🔄 未来扩展建议

### 短期优化
- [ ] 添加订单详情弹窗
- [ ] 支持订单搜索和筛选
- [ ] 添加物流追踪功能
- [ ] 实现用户头像上传

### 中期功能
- [ ] 添加收藏功能
- [ ] 实现地址簿管理
- [ ] 添加评价和评论功能
- [ ] 实现积分和优惠券系统

### 长期规划
- [ ] 会员等级体系
- [ ] 个性化推荐
- [ ] 社交分享功能
- [ ] 客服聊天集成

## 🐛 已知问题
无

## ✅ 测试检查项
- [x] 页面路由正常
- [x] 身份验证工作正常
- [x] API 接口返回正确数据
- [x] 响应式布局在各设备正常
- [x] 多语言切换正常
- [x] 样式与网站整体风格一致
- [x] 无 TypeScript 错误
- [x] 无 Linter 错误

## 📝 技术栈
- **框架**: Next.js 15 (App Router)
- **UI 组件**: Ant Design 5
- **样式**: CSS Modules + 自定义 CSS
- **数据库**: Prisma + SQLite
- **国际化**: next-intl
- **类型检查**: TypeScript

## 🎉 完成状态
✅ 所有功能已完成并测试通过！

---
**创建日期**: 2025-10-27  
**最后更新**: 2025-10-27


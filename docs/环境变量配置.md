# ğŸ”§ ç¯å¢ƒå˜é‡é…ç½®æŒ‡å—

## ğŸ“‹ å¿«é€Ÿå¼€å§‹

### ç¬¬ 1 æ­¥ï¼šåˆ›å»º `.env.local` æ–‡ä»¶

åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `.env.local` æ–‡ä»¶ï¼š

```bash
cd /Users/songhaonan/myFile/ç‰çŸ³ç½‘ç«™/jade-gems
touch .env.local
```

### ç¬¬ 2 æ­¥ï¼šå¤åˆ¶ä»¥ä¸‹å†…å®¹åˆ° `.env.local`

```bash
# ===================================
# æ•°æ®åº“é…ç½®ï¼ˆå¿…éœ€ï¼‰
# ===================================
DATABASE_URL="postgresql://user:password@host:port/database?pgbouncer=true"
DIRECT_URL="postgresql://user:password@host:port/database"

# ===================================
# Stripe æ”¯ä»˜é…ç½®ï¼ˆå¿…éœ€ï¼‰
# ===================================
STRIPE_SECRET_KEY="sk_test_æ›¿æ¢ä¸ºä½ çš„stripeå¯†é’¥"
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY="pk_test_æ›¿æ¢ä¸ºä½ çš„stripeå…¬é’¥"
STRIPE_WEBHOOK_SECRET="whsec_æ›¿æ¢ä¸ºä½ çš„webhookå¯†é’¥"

# ===================================
# ç½‘ç«™é…ç½®ï¼ˆå¿…éœ€ï¼‰
# ===================================
NEXT_PUBLIC_SITE_URL="http://localhost:3000"

# ===================================
# ç®¡ç†å‘˜é…ç½®ï¼ˆå¿…éœ€ï¼‰
# ===================================
ADMIN_EMAILS="song@demo.com"
```

### ç¬¬ 3 æ­¥ï¼šå¡«å†™å®é™…é…ç½®å€¼

#### 1ï¸âƒ£ æ•°æ®åº“é…ç½®

ä»æ‚¨çš„ Supabase æˆ– PostgreSQL æœåŠ¡è·å–ï¼š

```bash
# ç¤ºä¾‹ï¼ˆæ›¿æ¢ä¸ºå®é™…å€¼ï¼‰
DATABASE_URL="postgresql://postgres.xxx:password@aws-0-us-east-1.pooler.supabase.com:6543/postgres?pgbouncer=true"
DIRECT_URL="postgresql://postgres.xxx:password@aws-0-us-east-1.pooler.supabase.com:5432/postgres"
```

#### 2ï¸âƒ£ Stripe é…ç½®ï¼ˆè·å–æ–¹æ³•è§ä¸‹æ–¹ï¼‰

```bash
# ä» Stripe Dashboard è·å–
STRIPE_SECRET_KEY="sk_test_51xxxxx"
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY="pk_test_51xxxxx"
```

#### 3ï¸âƒ£ ç½‘ç«™ URL

```bash
# æœ¬åœ°å¼€å‘
NEXT_PUBLIC_SITE_URL="http://localhost:3000"

# ç”Ÿäº§ç¯å¢ƒï¼ˆéƒ¨ç½²åæ›¿æ¢ï¼‰
# NEXT_PUBLIC_SITE_URL="https://linxijade.songhaonan.site"
```

### ç¬¬ 4 æ­¥ï¼šé‡å¯å¼€å‘æœåŠ¡å™¨

```bash
# åœæ­¢å½“å‰æœåŠ¡å™¨ï¼ˆCtrl+Cï¼‰
# é‡æ–°å¯åŠ¨
npm run dev
```

---

## ğŸ”‘ å¦‚ä½•è·å– Stripe å¯†é’¥

### æ–¹æ³•ä¸€ï¼šä½¿ç”¨æµ‹è¯•å¯†é’¥ï¼ˆæ¨èæœ¬åœ°å¼€å‘ï¼‰

1. è®¿é—® [Stripe Dashboard](https://dashboard.stripe.com/)
2. ç¡®ä¿å·¦ä¸Šè§’æ˜¾ç¤º **Test mode**ï¼ˆæµ‹è¯•æ¨¡å¼ï¼‰
3. ç‚¹å‡»å³ä¸Šè§’ **Developers**
4. ç‚¹å‡» **API keys**
5. å¤åˆ¶ä¸¤ä¸ªå¯†é’¥ï¼š
   - **Secret key**: `sk_test_xxx`ï¼ˆç‚¹å‡» Reveal test key æ˜¾ç¤ºï¼‰
   - **Publishable key**: `pk_test_xxx`

### æ–¹æ³•äºŒï¼šä½¿ç”¨ç”Ÿäº§å¯†é’¥ï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰

1. å®Œæˆ Stripe è´¦æˆ·æ¿€æ´»
2. åˆ‡æ¢åˆ° **Live mode**ï¼ˆç”Ÿäº§æ¨¡å¼ï¼‰
3. æŒ‰ç…§ä¸Šè¿°æ­¥éª¤è·å– `sk_live_xxx` å’Œ `pk_live_xxx`

---

## âœ… é…ç½®æ£€æŸ¥æ¸…å•

å®Œæˆé…ç½®åï¼Œè¯·ç¡®è®¤ï¼š

- [ ] `.env.local` æ–‡ä»¶å·²åˆ›å»ºåœ¨é¡¹ç›®æ ¹ç›®å½•
- [ ] `DATABASE_URL` å·²å¡«å†™ä¸”å¯è¿æ¥
- [ ] `STRIPE_SECRET_KEY` å·²ä» Stripe Dashboard å¤åˆ¶
- [ ] `NEXT_PUBLIC_SITE_URL` å·²è®¾ç½®ä¸º `http://localhost:3000`
- [ ] å·²é‡å¯å¼€å‘æœåŠ¡å™¨ï¼ˆ`npm run dev`ï¼‰
- [ ] è®¿é—® http://localhost:3000 æ— æŠ¥é”™

---

## ğŸ§ª æµ‹è¯•é…ç½®æ˜¯å¦æˆåŠŸ

### 1. æµ‹è¯•æ•°æ®åº“è¿æ¥

```bash
npm run prisma studio
```

å¦‚æœèƒ½æ‰“å¼€ Prisma Studioï¼Œè¯´æ˜æ•°æ®åº“é…ç½®æ­£ç¡®ã€‚

### 2. æµ‹è¯•æ”¯ä»˜åŠŸèƒ½

1. è®¿é—® http://localhost:3000
2. æ·»åŠ å•†å“åˆ°è´­ç‰©è½¦
3. ç‚¹å‡» **å»ç»“è´¦**
4. å¦‚æœè·³è½¬åˆ° Stripe Checkout é¡µé¢ï¼Œè¯´æ˜é…ç½®æˆåŠŸï¼

### 3. æŸ¥çœ‹æ§åˆ¶å°æ—¥å¿—

å¦‚æœé…ç½®æœ‰è¯¯ï¼Œæ§åˆ¶å°ä¼šæ˜¾ç¤ºï¼š

```
[Checkout API] ç¼ºå°‘å¿…è¦çš„ç¯å¢ƒå˜é‡:
- STRIPE_SECRET_KEY: âŒ æœªé…ç½®
- NEXT_PUBLIC_SITE_URL: âŒ æœªé…ç½®
è¯·å‚è€ƒæ–‡æ¡£: docs/Stripeæ”¯ä»˜é…ç½®æŒ‡å—.md
```

---

## ğŸš¨ å¸¸è§é—®é¢˜

### Q1: ä¿®æ”¹ `.env.local` åä¸ç”Ÿæ•ˆï¼Ÿ

**A**: å¿…é¡»é‡å¯å¼€å‘æœåŠ¡å™¨ï¼š

```bash
# åœæ­¢å½“å‰æœåŠ¡å™¨ï¼ˆCtrl+C æˆ– Cmd+Cï¼‰
npm run dev
```

### Q2: `.env.local` æ–‡ä»¶æ”¾åœ¨å“ªé‡Œï¼Ÿ

**A**: é¡¹ç›®æ ¹ç›®å½•ï¼Œä¸ `package.json` åŒçº§ï¼š

```
jade-gems/
â”œâ”€â”€ .env.local          â† è¿™é‡Œ
â”œâ”€â”€ package.json
â”œâ”€â”€ src/
â””â”€â”€ ...
```

### Q3: å¯ä»¥ä½¿ç”¨ `.env` ä»£æ›¿ `.env.local` å—ï¼Ÿ

**A**: ä¸æ¨èã€‚`.env.local` ä¼˜å…ˆçº§æ›´é«˜ï¼Œä¸”é€šå¸¸è¢« `.gitignore` å¿½ç•¥ï¼Œæ›´å®‰å…¨ã€‚

### Q4: ç”Ÿäº§ç¯å¢ƒå¦‚ä½•é…ç½®ï¼Ÿ

**A**: åœ¨ Vercel é¡¹ç›®è®¾ç½®ä¸­æ·»åŠ ç¯å¢ƒå˜é‡ï¼š

1. æ‰“å¼€ Vercel é¡¹ç›®
2. Settings â†’ Environment Variables
3. æ·»åŠ æ‰€æœ‰å˜é‡ï¼ˆä½¿ç”¨ç”Ÿäº§ç¯å¢ƒçš„å€¼ï¼‰
4. é‡æ–°éƒ¨ç½²

### Q5: Stripe æµ‹è¯•å¯†é’¥å¯ä»¥åœ¨ç”Ÿäº§ç¯å¢ƒä½¿ç”¨å—ï¼Ÿ

**A**: ä¸å¯ä»¥ï¼æµ‹è¯•å¯†é’¥ï¼ˆ`sk_test_`ï¼‰åªèƒ½æœ¬åœ°å¼€å‘ä½¿ç”¨ï¼Œç”Ÿäº§ç¯å¢ƒå¿…é¡»ä½¿ç”¨ç”Ÿäº§å¯†é’¥ï¼ˆ`sk_live_`ï¼‰ã€‚

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [Stripe æ”¯ä»˜é…ç½®æŒ‡å—](./Stripeæ”¯ä»˜é…ç½®æŒ‡å—.md) - Stripe è¯¦ç»†é…ç½®
- [Next.js ç¯å¢ƒå˜é‡æ–‡æ¡£](https://nextjs.org/docs/basic-features/environment-variables)
- [Vercel ç¯å¢ƒå˜é‡æ–‡æ¡£](https://vercel.com/docs/environment-variables)

---

**é…ç½®å®Œæˆåï¼Œæ‚¨å°±å¯ä»¥å¼€å§‹æµ‹è¯•æ”¯ä»˜åŠŸèƒ½äº†ï¼** ğŸ‰

